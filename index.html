<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IN/OUT Log System (Persistent)</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; }
    label { display: block; margin-top: 10px; }
    input, button, select { padding: 8px; margin-top: 5px; width: 300px; max-width: 100%; }
    input[readonly] { background-color: #f9f9f9; cursor: not-allowed; }
    .buttons { margin-top: 15px; }
    .buttons button, .buttons select { width: 140px; margin-right: 10px; margin-bottom: 10px; }
    table { margin-top: 30px; width: 100%; border-collapse: collapse; }
    th, td { padding: 10px; border: 1px solid #999; text-align: center; }
    th { background-color: #f2f2f2; }
    h3 { margin-top: 50px; }
    /* Space for floating header */
    body { padding-top: 80px; }

    /* Highlight input box on focus */
    input[type="text"]:focus {
      background-color: lightblue;
      color: white;
      outline: none;
    }

    /* Normal button */
    button, select {
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background-color: #ddd;
      color: black;
    }

    /* Active (highlighted) button */
    .active-btn {
      background-color: blue !important;
      color: white !important;
    }

    /* Highlighted table headers */
    .highlight-header {
      background-color: #d6f0ff !important; /* light blue */
    }

    /* Flex layout for inputs and calendar */
    .form-layout {
      display: flex;
      align-items: flex-start;
      gap: 20px;
      margin-bottom: 20px;
    }

    /* Calendar box style */
    #calendar-box {
      width: 300px;
      border: 1px solid #ccc;
      padding: 10px;
    }

    /* Responsive: stack on small screens */
    @media (max-width: 768px) {
      .form-layout {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>

  <h2>IN/OUT Data Entry Log</h2>

  <!-- Flex container: inputs + buttons + calendar -->
  <div class="form-layout">
    <div>
      <label for="idNumber">Enter ID Number:</label>
      <input type="text" id="idNumber" placeholder="Enter ID Number" autofocus />

      <label for="name">Name:</label>
      <input type="text" id="name" readonly />

      <div class="buttons">
        <button onclick="highlightButton(this); markStatus('IN')">IN</button>
        <button onclick="highlightButton(this); markStatus('OUT')">OUT</button>
        
        <!-- Dropdown for extra actions -->
        <select onchange="handleAction(this.value)">
          <option value="">More Actions</option>
          <option value="save">Save as .TXT</option>
          <option value="summary">Generate Summary</option>
          <option value="clear">Clear History</option>
        </select>
      </div>
    </div>

    <!-- Calendar Box -->
    <div id="calendar-box"></div>
  </div>

  <!-- Log Table -->
  <table id="logTable">
    <thead>
      <tr>
        <th class="highlight-header">Name</th>
        <th class="highlight-header">ID Number</th>
        <th class="highlight-header">Status</th>
        <th class="highlight-header">Timestamp</th>
        <th class="highlight-header">Duration (min)</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <!-- Summary Table -->
  <h3>Summary Report</h3>
  <table id="summaryTable">
    <thead>
      <tr>
        <th>Name</th>
        <th>ID Number</th>
        <th>Total Duration (minutes)</th>
        <th>Sessions Counted</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <!-- Highlight button logic -->
  <script>
    function highlightButton(btn) {
      // Remove highlight from IN/OUT buttons only
      document.querySelectorAll(".buttons button").forEach(b => b.classList.remove("active-btn"));
      // Add highlight to the clicked button
      btn.classList.add("active-btn");
    }

    // Handle dropdown actions
    function handleAction(action) {
      if (action === "save") {
        saveAsTxt();
      } else if (action === "summary") {
        generateSummary();
      } else if (action === "clear") {
        clearHistory();
      }
      // Reset dropdown to default after action
      document.querySelector(".buttons select").value = "";
    }
  </script>

  <!-- Include calendar.js and header.js -->
  <script src="calendar.js"></script>
  <script src="header.js"></script>

</body>
</html>
